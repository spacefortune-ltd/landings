<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Plinko Simulation</title>
	<meta name="description" content="Meilleur casino en ligne en France">
	<meta name="robots" content="noindex,nofollow">
	<link rel="icon" type="image/x-icon" href="/img/logo.ico">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://mlcs.bet//" rel="canonical">
	<link rel="stylesheet" href="css/swiper-bundle.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="header">
	<div class="container">

	</div>
</header>

<main class="main">
	<div class="container">
		<section class="canvas">

		</section>
		<button>Button</button>
	</div>
</main>
<script src="./matter/matter.min.js"></script>
<script>
    const {Engine, Render, Runner, Bodies, Composite, Events} = Matter;

    const worldWidth = 500;
    const startPins = 3;
    const pinLines = 7;
    const pinSize = 5;
    const pinGap = 50;
    const ballSize = 10;

    var engine = Engine.create();

    var render = Render.create({
        element: document.querySelector('.canvas'),
        engine: engine,
        options: {
            width: 500,
            height: 500,
            wireframes: false,
            background: null,
        },
    });

    const pins = [];
    for (let l = 0; l < pinLines; l++) {
        const linePins = startPins + l;
        const lineWidth = linePins * pinGap;
        for (let i = 0; i < linePins; i++) {
            const pin = Bodies.circle(
                worldWidth / 2 - lineWidth / 2 + i * pinGap,
                100 + l * pinGap,
                pinSize,
                {
                    isStatic: true,
                    render: {
                        fillStyle: "red",
                    },
                }
            );
            pins.push(pin);
        }
    }
    Composite.add(engine.world, pins);

    Render.run(render);

    var runner = Runner.create();

    Runner.run(runner, engine);

    document.querySelector("button").addEventListener("click", function clickHandler() {
        document.querySelector("button").removeEventListener("click", clickHandler);

        for (let t = 0; t < 5; t++) {
            setTimeout(() => {
                const ball = Bodies.circle(370 + (t * 0.5), 0, ballSize, {
                    restitution: 0.75,
                    render: { fillStyle: "blue" },
                });
                Composite.add(engine.world, ball);
            }, t * 1000);
        }

        setTimeout(() => {
            document.body.addEventListener("click", clickHandler);
        }, 5000);
    });
</script>
<script src="https://code.jquery.com/jquery.min.js"></script>
<script src="js/swiper-bundle.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>